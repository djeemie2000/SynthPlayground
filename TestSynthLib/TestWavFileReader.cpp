#include "UnitTest++.h"
#include "WavFileReader.h"

#include <cmath>

namespace
{

TEST(abc)
{
    CWavFileReader Reader;

    //Reader.Read("/home/pj/Downloads/musicradar-atmospheric-samples-2/Textures/Chatter.wav");
    Reader.Read("/home/pj/Downloads/musicradar-atmospheric-samples-2/Textures/Chitlins.wav");

    CHECK_EQUAL(0, Reader.GetSize());
    CHECK_EQUAL(0, Reader.GetSamplingFrequency());
    CHECK_EQUAL(0, Reader.GetLeft().size());
    CHECK_EQUAL(0, Reader.GetRight().size());

    int cntr = 0;
    for(int idx = 0; idx<Reader.GetSize(); ++idx)
    {
        if(std::fabs(Reader.GetLeft()[idx])<=0.001f)
        {
            ++cntr;
            if(10<cntr)
            {
                //std::printf("idx=%d cntr=%d \r\n", idx, cntr);
                //break;
            }
        }
        else
        {
            cntr = 0;
        }
    }

    int bs = 0;
}

}
